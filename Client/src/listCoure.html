<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="./assests/css/output.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://unpkg.com/@andreasremdt/simple-translator@latest/dist/umd/translator.min.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#FDF6EA]">
    <select id="languageSelect">
        <option value="vi">Vietnamese</option>
        <option value="en">English</option>
    </select>
    <div class="mx-auto">
        <section class="flex flex-col bg-[#DA853D] w-full px-8 py-10 mb-12">
            <h1 class="text-[#FFFFFF]" data-i18n="course-template.title-section.title"></h1>
            <div class="flex flex-row items-center gap-1">
                <p class="text-white" data-i18n="course-template.title-section.home"></p>
                <p class="text-white">/</p>
                <p class="text-white" data-i18n="course-template.title-section.template"></p>
            </div>
        </section>
        <section class="flex flex-col lg:flex-row px-24 lg:px-14">
            <div class="w-full lg:w-1/3 flex flex-col mb-12 ">
                <div class="bg-[#F5E9D4] px-6 py-6 mb-6 flex flex-col">
                    <input id="search-filter" type="text" class="w-full" placeholder="a">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-2">
                        <svg class="h-5 w-5 fill-slate-300" viewBox="0 0 20 20"><!-- ... --></svg>
                    </span>
                </div>
                <div class="bg-[#F5E9D4] px-6 py-6 mb-6 flex flex-col">
                    <h2 class="underline underline-offset-[10px] mb-4" data-i18n="course-category.title"></h2>
                    <ul class="gap-2">
                        <li>
                            <input type="checkbox">
                            <label>Education</label>
                        </li>

                    </ul>

                </div>

                <div class="bg-[#F5E9D4] px-6 py-6 mb-6">
                    <h2 class="underline underline-offset-[10px] mb-4" data-i18n="course-template.cost-filter.title"></h2>
                    <ul class="gap-2">
                        <li>
                            <input type="radio">
                            <label>All</label>
                        </li>
                    </ul>
                </div>

                <div class="bg-[#F5E9D4] px-6 py-6 mb-6">
                    <h2 class="underline underline-offset-[10px]" data-i18n="course-template.date-filter.title"></h2>
                    <input class="w-[100%]" type="datetime-local">
                </div>
            </div>
            <div class="flex flex-col w-auto md:w-full lg:px-8">
                <div class="flex flex-col w-full lg:flex-row lg:justify-between">
                    <div class="flex flex-row justify-center items-center gap-4 mb-6">
                        <button id="grid-button"
                            class="px-6 py-2 border border-black rounded-lg hover:bg-xanhMain hover:border-0"
                            data-i18n="course-template.button.button-grid"></button>
                        <button id="col-button"
                            class="px-6 py-2 border border-black rounded-lg hover:bg-xanhMain hover:border-0"
                            data-i18n="course-template.button.button-col"></button>
                    </div>
                    <div class="flex flex-col lg:flex-row gap-4 mb-6 justify-center items-center">
                        <p>Order BY</p>
                        <div class=" flex items-center justify-center">
                            <div class="relative group">
                                <button id="dropdown-button"
                                    class="inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500">
                                    <span class="mr-2">Open Dropdown</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 ml-2 -mr-1"
                                        viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd"
                                            d="M6.293 9.293a1 1 0 011.414 0L10 11.586l2.293-2.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </button>
                                <div id="dropdown-menu"
                                    class="hidden absolute right-0 mt-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 p-1 space-y-1">
                                    <input id="search-input"
                                        class="block w-full px-4 py-2 text-gray-800 border rounded-md  border-gray-300 focus:outline-none"
                                        type="text" placeholder="Search items" autocomplete="off">

                                    <a href="#"
                                        class="block px-4 py-2 text-gray-700 hover:bg-gray-100 active:bg-blue-100 cursor-pointer rounded-md">Uppercase</a>
                                    <a href="#"
                                        class="block px-4 py-2 text-gray-700 hover:bg-gray-100 active:bg-blue-100 cursor-pointer rounded-md">Lowercase</a>
                                    <a href="#"
                                        class="block px-4 py-2 text-gray-700 hover:bg-gray-100 active:bg-blue-100 cursor-pointer rounded-md">Camel
                                        Case</a>
                                    <a href="#"
                                        class="block px-4 py-2 text-gray-700 hover:bg-gray-100 active:bg-blue-100 cursor-pointer rounded-md">Kebab
                                        Case</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid-container mb-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 xl:grid-cols-3 gap-8">

                </div>
                <div class="flex flex-row justify-center items-center gap-4 mb-6">
                    <nav aria-label="Page navigation example" class="flex flex-row">
                        <a href="#"
                            class="prev flex items-center justify-center px-4 h-10 ms-0 leading-tight bg-white text-black border border-black rounded-l-xl transition duration-700 ease-in-out hover:bg-[#838C48]">
                            <span class="sr-only">Previous</span>
                            <svg class="w-3 h-3 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 6 10">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2" d="M5 1 1 5l4 4" />
                            </svg>
                        </a>
                        <ul class="pagination flex items-center -space-x-px h-10 text-base">

                        </ul>
                        <a href="#"
                            class="next flex items-center justify-center px-4 h-10 leading-tight text-black bg-white border border-black rounded-r-xl transition duration-700 ease-in-out hover:bg-[#838C48]">
                            <span class="sr-only">Next</span>
                            <svg class="w-3 h-3 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 6 10">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2" d="m1 9 4-4-4-4" />
                            </svg>
                        </a>
                    </nav>
                </div>
            </div>

        </section>

    </div>
    <script defer>
        window.onload = function () {
            var translator = new Translator({
                filesLocation: "../languages",
            });

            var savedLanguage = localStorage.getItem("selectedLanguage") || "vi";
            var languageSelect = document.getElementById("languageSelect");
            languageSelect.value = savedLanguage;

            function updateLanguage(newLanguage) {
                translator.translatePageTo(newLanguage);
                localStorage.setItem("selectedLanguage", newLanguage);
            }

            translator.fetch(["vi", "en"]).then(() => {
                translator.translatePageTo(savedLanguage);
            });

            languageSelect.addEventListener("change", function () {
                updateLanguage(languageSelect.value);
            });
        };



        const dropdownButton = document.getElementById('dropdown-button');
        const dropdownMenu = document.getElementById('dropdown-menu');
        const searchInput = document.getElementById('search-input');
        let isOpen = true;

        function toggleDropdown() {
            isOpen = !isOpen;
            dropdownMenu.classList.toggle('hidden', !isOpen);
        }

        // Set initial state
        toggleDropdown();

        dropdownButton.addEventListener('click', () => {
            toggleDropdown();
        });


        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase();
            const items = dropdownMenu.querySelectorAll('a');
            // console.log(searchTerm)
            items.forEach((item) => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        });


    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const container = document.querySelector('.grid-container');
            const paginationContainer = document.querySelector('.pagination');
            const pageNumber = 1;
            const perPageNumber = 12;
            let course;


            const renderPosts = async (page, perPage) => {
                let uri = `http://localhost:3000/courses?_page=${page}&_per_page=${perPage}`;
                const res = await fetch(uri);
                const data = await res.json();
                course = data.data;
                renderGrid(data.data);
                pagination(data);
            };

            const searchFil = document.getElementById('search-filter');
            searchFil.addEventListener('input', () => {
                const searchText = searchFil.value.toLowerCase();
                const filteredData = course?.filter((item) => item.subject.toLowerCase().includes(searchText));
                renderGrid(filteredData)
            });




            const renderGrid = (data) => {
                let template = '';
                data?.forEach((item) => {
                    time = item.duration.split('/');
                    template += `
                    <div  class="grid-item flex flex-col gap-4 ">
                        <div class="h-fit group">
                            <div class="relative overflow-hidden">
                                <img class="image-card  object-cover w-full h-full z-0 hover:scale-110"
                                    src=${item?.image}
                                    alt="${item.course}" />
                                <div
                                    class="absolute h-full w-full bg-[#838C48]/80  flex items-center justify-center -bottom-10 group-hover:bottom-0 opacity-0 group-hover:opacity-100 transition-all duration-300">
                                    <button class="details bg-black text-white py-2 px-5" data-id="${item.id}">Add to cart</button>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col gap-4">
                        <h3 class="text-[#DA853D] text-3xl !important">Free</h3>
                        <h3>Introduction to Calculus</h3>
                        <div class="flex flex-row gap-2 items-center">
                            <a href="#" class="text-gray-400 hover:text-[#DA853D]">${item.subject}</a>
                            <div class="border border-gray-400 h-full"></div>
                            <a class="text-gray-400 cursor-none">${item?.numberOfCurriculum} Curriculum</a>
                        </div>
                        <p class="description hidden">${item?.description}</p>
                        <div class="border border-black w-full"></div>
                        <div class="flex flex-col">
                            <div class="flex flex-row items-center gap-2">
                                <i class="fa-regular fa-clock"></i>
                                <span class="">${time[0]}d ${time[1]}h ${time[2]}m</span>
                            </div>
                            <div class="flex flex-row">
                                <div class="flex items-center" id="star-container">

                                </button>
  <button type="button" class="star size-5 inline-flex justify-center items-center text-2xl rounded-full text-gray-300 hover:text-yellow-400 disabled:opacity-50 disabled:pointer-events-none dark:text-gray-600 dark:hover:text-yellow-500" data-rating="1">
    <svg class="flex-shrink-0 size-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  </button>
</button>
  <button type="button" class="star size-5 inline-flex justify-center items-center text-2xl rounded-full text-gray-300 hover:text-yellow-400 disabled:opacity-50 disabled:pointer-events-none dark:text-gray-600 dark:hover:text-yellow-500" data-rating="2">
    <svg class="flex-shrink-0 size-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  </button>
</button>
  <button type="button" class="star size-5 inline-flex justify-center items-center text-2xl rounded-full text-gray-300 hover:text-yellow-400 disabled:opacity-50 disabled:pointer-events-none dark:text-gray-600 dark:hover:text-yellow-500" data-rating="3">
    <svg class="flex-shrink-0 size-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  </button>
</button>
  <button type="button" class="star size-5 inline-flex justify-center items-center text-2xl rounded-full text-gray-300 hover:text-yellow-400 disabled:opacity-50 disabled:pointer-events-none dark:text-gray-600 dark:hover:text-yellow-500" data-rating="4">
    <svg class="flex-shrink-0 size-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  </button>
  <button type="button" class="star size-5 inline-flex justify-center items-center text-2xl rounded-full text-gray-300 hover:text-yellow-400 disabled:opacity-50 disabled:pointer-events-none dark:text-gray-600 dark:hover:text-yellow-500" data-rating="5">
    <svg class="flex-shrink-0 size-5" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  </button>
</div>
<span id="rating-info" class="text-gray-300">(0 votes, average: 0 out of 5, rated)</span>

                            </div>
                        </div>
                    </div>
                </div>
          `;
                });

                container.innerHTML = template;
                const starContainer = document.getElementById('star-container');
                const starButtons = starContainer.querySelectorAll('button');
                const detailsButtons = document.querySelectorAll('.details');
                const stars = document.querySelectorAll('.star');
                const ratingInfo = document.getElementById('rating-info');
                let currentRating = 0;

                stars.forEach(star => {
                    star.addEventListener('mouseover', () => {
                        const rating = parseInt(star.getAttribute('data-rating'));
                        highlightStars(rating);
                    });

                    star.addEventListener('click', () => {
                        const rating = parseInt(star.getAttribute('data-rating'));
                        currentRating = rating;
                        updateRatingInfo();
                    });
                });
                function highlightStars(rating) {
                    console.log(stars)
                    stars.forEach((star, index) => {
                        const starRating = parseInt(star.getAttribute('data-rating'));
                        if (starRating < rating) {
                            star.classList.remove('text-gray-300');
                            star.classList.add('text-yellow-400');
                        } else {
                            star.classList.remove('text-yellow-400');
                            star.classList.add('text-gray-300');
                        }
                    });
                }
                const gridItem = document.getElementById("grid-item")
                const gridItems = container.querySelectorAll('.grid-item');
                document.getElementById("grid-button").addEventListener("click", function () {

                    container.classList.add("sm:grid-cols-2", "md:grid-cols-2");
                    gridItems.forEach(function (gridItem) {
                        gridItem.classList.remove("flex-row");
                        gridItem.classList.add("flex-col");
                    });

                });
                document.getElementById("col-button").addEventListener("click", function () {
                    container.classList.remove("sm:grid-cols-2", "md:grid-cols-2");
                    gridItems.forEach(function (gridItem) {
                        const descriptionElements = gridItem.getElementsByClassName('description');
                        gridItem.classList.remove("flex-col");
                        gridItem.classList.add("flex-row");
                        for (let i = 0; i < descriptionElements.length; i++) {
                            const descriptionElement = descriptionElements[i];
                            descriptionElement.classList.remove("hidden");
                        }
                    });
                });


                function updateRatingInfo() {
                    ratingInfo.textContent = `(${currentRating} votes, average: ${currentRating.toFixed(2)} out of 5, rated)`;
                }
                detailsButtons.forEach((button) => {
                    button.addEventListener('click', () => {
                        const id = parseInt(
                            button.getAttribute('data-id')
                        );
                        window.location.href = `/details/${id}`
                    });
                });

            };
            let isPrev
            const pagination = (data) => {
                let template = '';
                for (let i = 1; i <= data.pages; i++) {
                    const isActive = data.prev + 1 === i ? 'active' : '';
                    isPrev = data.prev === 1 ? true : false;
                    // const isPrev = data.prev === null ? isPrev = true : isPrev= false;

                    template += `
                          <li>
                            <a href="#" aria-current="page" 
                             class="page-item z-10 flex items-center justify-center px-4 h-10  text-black border border-black bg-white transition duration-700 ease-in-out hover:bg-[#838C48]" data-id="${i}"  data-prev="${data.prev}"  data-next="${data.next}">${i}</a>
                          </li>
                    `;
                }
                paginationContainer.innerHTML = template;

                const pageItems = document.querySelectorAll('.page-item');

                pageItems.forEach((item) => {
                    const prev = document.querySelectorAll('.prev');
                    prev.forEach((prev) => {
                        if (isPrev) {
                            prev.style.display = 'flex';
                            prev.addEventListener('click', () => {
                                page = parseInt(
                                    item.getAttribute('data-prev')
                                );
                                renderPosts(page, 5);
                            })
                        } else {
                            prev.style.display = 'none';
                        }
                    });

                    const next = document.querySelector('.next');
                    next.addEventListener('click', () => {
                        page = parseInt(
                            item.getAttribute('data-next')
                        );
                        renderPosts(page, 5);
                    });
                    item.addEventListener('click', () => {
                        const page = parseInt(
                            item.getAttribute('data-id')
                        );
                        renderPosts(page, 5);
                    });
                });
            };

            window.addEventListener('DOMContentLoaded', () => {
                renderPosts(1, 6);
            });
        });
    </script>

</body>

</html>